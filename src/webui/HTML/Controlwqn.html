<!DOCTYPE html>

<html>


<head>
    <meta charset="utf-8">
    <title>Control Module</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/navbar.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://cdn.staticfile.org/angular.js/1.6.3/angular.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>


</head>

<body onload="draw()">

<style type="text/css">
    .icon {
        font-size: 30px;
        width: 1em; height: 1em;
        vertical-align: -0.15em;
        fill: currentColor;
        overflow: hidden;
        margin-right: 20px;
    }
</style>

<div class="row">
    <!-- uncomment code for absolute positioning tweek see top comment in css -->
    <!-- <div class="absolute-wrapper"> </div> -->
    <!-- Menu -->
    <div class="side-menu col-md-3 col-lg-3">

        <nav class="navbar navbar-default" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <div class="brand-wrapper">
                    <!-- Hamburger -->
                    <button type="button" class="navbar-toggle">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="glyphicon glyphicon-ok"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <!-- Brand -->
                    <div class="brand-name-wrapper">
                        <a class="navbar-brand" href="#">
                            <p style="font-family: verdana;font-size:250%"> Chameleon</p>
                        </a>
                        <div class="left" style="float: right">
                            <img src="../icon/chameleon-icon" style="width: 60px;height: 60px">
                        </div>
                    </div>
                </div>

            </div>

            <!-- Main Menu -->
            <div class="side-menu-container">
                <ul class="nav navbar-nav">

                    <li>
                        <a href="Control.html" style="font-size: 150%;">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-kongzhitai-"></use>
                            </svg>
                            控制模块
                        </a>
                    </li>

                    <li>
                        <a href="Operation.html" style="font-size: 150%;">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-zuoye"></use>
                            </svg>
                            作业
                        </a>
                    </li>

                    <li>
                        <a href="#" style="font-size: 150%;">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-icon-test"></use>
                            </svg>
                            配置模块
                        </a>
                    </li>

                    <li>
                        <a href="#" style="font-size: 150%;">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-shuju"></use>
                            </svg>
                            数据平面模块
                        </a>
                    </li>

                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>
    </div>

    <!-- Main Content -->
    <div class="col-md-8 col-lg-8 ">
            <div style="margin-top: 15px; height:50px">
            <p style="font-size: 200%;">
               <svg class="icon" aria-hidden="true">
                  <use xlink:href="#icon-kongzhitai-"></use>
               </svg>
               控制模块
            </p>
        </div>
            <ul id="myTab" class="nav nav-tabs">

                <li class="active">
                    <a href="#slave_node" data-toggle="tab" style="font-size: 135%">
                        机器节点
                    </a>
                </li>
                <li>
                    <a href="#resource" data-toggle="tab" style="font-size: 135%">
                        集群资源使用统计
                    </a>
                </li>
                <li>
                    <a href="#algorithmoption" data-toggle="tab" style="font-size: 135%">
                        调度算法选择
                    </a>
                </li>
                <li>
                    <a href="#schedulingpolicy" data-toggle="tab" style="font-size: 135%">
                        时空共享调度策略
                    </a>
                </li>
                <li>
                    <a href="#schedulingpolicy" data-toggle="tab" style="font-size: 135%">
                        网络拓扑图
                    </a>
                </li>
            </ul>

            <div class="row">
                <!--</div>-->
                <div id="myTabContent" class="tab-content" style="font-size: 150%; margin-top: 15px">
                    <div class="tab-pane fade in active" id="submit_work">
                        <div class="container-fluid">
                            <div class="side-body">
                                <h1> Main Content here </h1>
                                <p>666</p>
                            </div>
                        </div>
                    </div>
        <div class="tab-pane fade" id="slave_node">
            <div class="container-fluid">
                <div class="side-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>id</th>
                            <th>作业名字</th>
                            <th>CPU使用</th>
                            <th>内存</th>
                            <th>硬盘</th>
                            <th>端口</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>1核</td>
                            <td>1G</td>
                            <td>5G</td>
                            <td>123.12.23.2/</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>3</td>
                            <td>1核</td>
                            <td>1G</td>
                            <td>5G</td>
                            <td>123.12.23.2/</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="resource">
            <div class="container-fluid">
                <div class="side-body"  ng-app="resourceAPP" ng-controller="resourceCtrl">
                    <table class="table table-hover" >
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>IP</th>
                            <th>CPU使用率</th>
                            <th>内存使用率</th>
                            <th>硬盘使用率</th>
                            <th>交换空间使用率</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="x in content">
                            <td>blank</td>
                            <td>{{x.slave_id}}</td>
                            <td>{{x.cpu_usage.cpu_used | number:2}} %</td>
                            <td>{{x.mem_usage.mem_available / x.mem_usage.mem_total * 100 | number:2}} %</td>
                            <td>{{x.disk_usage.available_percent | number:2}} %</td>
                            <td>{{x.mem_usage.swap_free / x.mem_usage.swap_total * 100 | number:2}} %</td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="algorithm option">
            <div class="container-fluid">
                <div class="side-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>id</th>
                            <th>作业名字</th>
                            <th>CPU使用</th>
                            <th>内存</th>
                            <th>硬盘</th>
                            <th>端口</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>0</td>
                            <td>1</td>
                            <td>1核</td>
                            <td>1G</td>
                            <td>5G</td>
                            <td>123.12.23.2/</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="scheduling policy">
            <div class="container-fluid">
                <div class="side-body">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>id</th>
                            <th>作业名字</th>
                            <th>CPU使用</th>
                            <th>内存</th>
                            <th>硬盘</th>
                            <th>端口</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>0</td>
                            <td>1</td>
                            <td>1核</td>
                            <td>1G</td>
                            <td>5G</td>
                            <td>123.12.23.2/</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="../js/bootstrap.min.js"></script>
<script src="../js/navbar.js"></script>
<script src="../js/iconfont.js"></script>

<script type="text/javascript" src="../js/dist/vis.js"></script>
<link href="../css/dist/vis-network.min.css" rel = "stylesheet" type ="text/css"/>

<script type="text/javascript">
    var nodes = null;
    var edges = null;
    var network = null;

    var DIR = '../icon/refresh-cl/';
    var EDGE_LENGTH_MAIN = 150;
    var EDGE_LENGTH_SUB = 50;
    // Called when the Visualization API is loaded.
    function draw() {
        // Create a data table with nodes.
        nodes = [];
        // Create a data table with links.
        edges = [];
        nodes.push({id: 1, label: 'Main', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
        nodes.push({id: 2, label: 'Office', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
        nodes.push({id: 3, label: 'Wireless', image: DIR + 'Network-Pipe-icon.png', shape: 'image'});
        edges.push({from: 1, to: 2, length: EDGE_LENGTH_MAIN});
        edges.push({from: 1, to: 3, length: EDGE_LENGTH_MAIN});

        for (var i = 4; i <= 7; i++) {
            nodes.push({id: i, label: 'Computer', image: DIR + 'Hardware-My-Computer-3-icon.png', shape: 'image'});
            edges.push({from: 2, to: i, length: EDGE_LENGTH_SUB});
        }

        nodes.push({id: 101, label: 'Printer', image: DIR + 'Hardware-Printer-Blue-icon.png', shape: 'image'});
        edges.push({from: 2, to: 101, length: EDGE_LENGTH_SUB});

        nodes.push({id: 102, label: 'Laptop', image: DIR + 'Hardware-Laptop-1-icon.png', shape: 'image'});
        edges.push({from: 3, to: 102, length: EDGE_LENGTH_SUB});

        nodes.push({id: 103, label: 'network drive', image: DIR + 'Network-Drive-icon.png', shape: 'image'});
        edges.push({from: 1, to: 103, length: EDGE_LENGTH_SUB});

        nodes.push({id: 104, label: 'Internet', image: DIR + 'System-Firewall-2-icon.png', shape: 'image'});
        edges.push({from: 1, to: 104, length: EDGE_LENGTH_SUB});

        for (var i = 200; i <= 201; i++ ) {
            nodes.push({id: i, label: 'Smartphone', image: DIR + 'Hardware-My-PDA-02-icon.png', shape: 'image'});
            edges.push({from: 3, to: i, length: EDGE_LENGTH_SUB});
        }

        // create a network
        var container = document.getElementById('mynetwork');
        var data = {
            nodes: nodes,
            edges: edges
        };
        var options = {};
        network = new vis.Network(container, data, options);
    }

</script>
c

<script>
    var resource_app = angular.module('resourceAPP', []);

    // app.controller('siteCtrl', function($scope, $http) {
    //     $http.get("http://172.20.110.228/master/runtime-resources")
    //         .then(function (response) {$scope.names = response.data.quantity;});
    // });

    resource_app.controller('resourceCtrl', function($scope, $http) {
        $http({
            method: 'GET',
            url: 'http://172.20.110.228:6060/master/runtime-resources'
        }).then(function successCallback(response) {
            $scope.content = response.data.content;
            $scope.quantity = response.data.quantity;
            console.log($scope.content)
        }, function errorCallback(response) {
            // 请求失败执行代码
        });
    });
</script>


</body>

</html>

